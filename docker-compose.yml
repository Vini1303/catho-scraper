version: '3.8'
services:
  catho-scraper:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        - PIP_EXTRA_INDEX_URL=https://pypi.org/simple
    environment:
      - PIP_NO_CACHE_DIR=true
    ports:
      - "5000:5000"
    volumes:
      - scraper-data:/app/data
    environment:
      - FLASK_ENV=production
      - EMAIL=${EMAIL}  # Configure no Portainer
      - SENHA=${SENHA}
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.catho.rule=Host(`catho.seudominio.com`)"

volumes:
  scraper-data:
